<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Confirm Flight</title>
    <link rel="stylesheet" href="/styles/confirmpurchase.css" />
</head>
<body>

<!-- Confirmation Card -->
<div class="container">
    <h2>Confirm Your Flight</h2>

    <form th:action="@{/customer/{customerID}/paymentmethoddetails(customerID=${customer.id})}" method="POST">
        <!-- Hidden Fields -->
        <input type="hidden" name="tripType" th:value="${tripType}">
        <input type="hidden" name="outboundFlightId" th:value="${outboundFlight.flightID}">
        <input type="hidden" name="returnFlightId" th:value="${returnFlight != null ? returnFlight.flightId : null}">
        <input type="hidden" name="dashPassOption" th:value="${dashPassOption}">
        <input type="hidden" name="totalPrice" th:value="${totalPrice}">

        <!-- Outbound Flight Details -->
        <div class="section">
            <h3>Outbound Flight</h3>
            <p><strong>Flight Number:</strong> <span th:text="${outboundFlight.flightNumber}"></span></p>
            <p><strong>Departure Airport:</strong> <span th:text="${outboundFlight.departureAirportCode}"></span></p>
            <p><strong>Arrival Airport:</strong> <span th:text="${outboundFlight.arrivalAirportCode}"></span></p>
            <!-- More outbound flight details if needed -->
        </div>

        <!-- Return Flight Details (if applicable) -->
        <div class="section" th:if="${returnFlight != null}">
            <h3>Return Flight</h3>
            <p><strong>Return Flight Number:</strong> <span th:text="${returnFlight.flightNumber}"></span></p>
            <p><strong>Return Departure Airport:</strong> <span th:text="${returnFlight.departureAirportCode}"></span></p>
            <p><strong>Return Arrival Airport:</strong> <span th:text="${returnFlight.arrivalAirportCode}"></span></p>
            <!-- More return flight details -->
        </div>

        <!-- DashPass Option -->
        <div class="section">
            <h3>DashPass Option</h3>
            <div th:if="${dashPassOption == 'existing'}">
                <p><strong>Using Existing DashPass:</strong></p>
                <p><strong>DashPass ID:</strong> <span th:text="${dashPass.id}"></span></p>
                <p><strong>Valid Until:</strong> <span th:text="${dashPass.expirationDate}"></span></p>
            </div>
            <div th:if="${dashPassOption == 'purchase'}">
                <p><strong>Purchasing New DashPass:</strong></p>
                <p><strong>DashPass Price:</strong> $<span th:text="${#numbers.format(dashPass.price, 1, 'COMMA', 2, 'POINT')}"></span></p>
            </div>
        </div>

        <!-- Total Price -->
        <div class="section">
            <p><strong>Total Price:</strong> $<span th:text="${totalPrice}"></span></p>
        </div>

        <!-- Buttons -->
        <button type="submit">Confirm Booking</button>
        <button type="button" class="cancel-button" onclick="window.history.back();">Cancel</button>
    </form>
</div>

</body>
</html>
