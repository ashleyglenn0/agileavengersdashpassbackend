<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Customer Dashboard</title>
    <meta name="description" content="Southwest Airlines Customer Dashboard">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Link to the custom CSS file -->
    <link rel="stylesheet" th:href="@{/styles/customerDashboardCentered.css}">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
<header>
    <nav class="navbar">
        <div class="navbar-left">
            <a href="/customer/{customerId}/customerdashboard" class="navbar-brand">Home</a>
            <!-- You can add more navigation links here if needed -->
        </div>
        <div class="navbar-right">
            <form action="/perform_logout" method="post">
                <button type="submit" class="button">Logout</button>
            </form>
        </div>
    </nav>
</header>
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Customer Dashboard</title>
    <link rel="stylesheet" th:href="@{/styles/customerDashboardCentered.css}" />
</head>
<body>

<div class="container">
    <!-- Welcome message with the customer's name -->
    <h1>Welcome, <span th:text="${customer.user.firstName}"></span>!</h1>

    <!-- Upcoming Flight Section -->
    <section class="upcoming-reservation">
        <h3>Upcoming Flight</h3>
        <div th:if="${soonestReservation != null}">
            <p>Flight Number: <span th:text="${soonestReservation.flights[0].flightNumber}"></span></p>
            <p>Departure Airport: <span th:text="${soonestReservation.flights[0].departureAirportCode}"></span></p>
            <p>Departure Date: <span th:text="${soonestReservation.flights[0].departureDate}"></span></p>
            <p>Departure Time: <span th:text="${soonestReservation.flights[0].departureTime}"></span></p>
            <p>Status: <span th:text="${soonestReservation.status}"></span></p>
            <button class="button" th:onclick="'window.location.href=\'/customer/' + ${customer.id} + '/reservations\''">View All Reservations</button>
        </div>
        <div th:if="${soonestReservation == null}">
            <p>No upcoming reservations at this time.</p>
        </div>
    </section>

    <!-- DashPass Information Section -->
    <section>
        <div class="card-grid">
            <!-- Available DashPass to Add to Reservation -->
            <div class="dashboard-card">
                <h3>Available DashPass</h3>
                <div th:if="${numberOfDashPassesAvailableToAddToReservation > 0}">
                    <p>You have DashPasses available to add to a reservation.</p>
                    <a th:href="@{/customer/{customerId}/redeem(customerId=${customer.id})}">
                        <button class="button">Redeem DashPass</button>
                    </a>
                </div>
                <div th:if="${numberOfDashPassesAvailableToAddToReservation == 0}">
                    <p>You have no DashPasses available to redeem at the moment.</p>
                </div>
            </div>

            <!-- DashPass Purchase Option -->
            <div class="dashboard-card">
                <h3>Purchase DashPass</h3>
                <p>Need more DashPasses? Purchase one below!</p>
                <a th:href="@{/customer/{customerId}/purchasedashpass(customerId=${customer.id})}">
                    <button class="button">Purchase DashPass</button>
                </a>
            </div>
        </div>
    </section>

    <!-- Dashboard Actions Section -->
    <section class="actions">
        <h3>Dashboard Actions</h3>
        <button class="button" th:onclick="'window.location.href=\'/customer/' + ${customer.id} + '/purchaseflight\''">Purchase Flight</button>
    </section>

    <!-- Manage Payment Methods Section -->
    <section class="dashboard-card">
        <h3>Manage Payment Methods</h3>
        <button class="button" th:onclick="'window.location.href=\'/customer/' + ${customer.id} + '/managepaymentmethods\''">Manage Payment Methods</button>
    </section>
</div>

<!-- Footer Section -->
<footer>
    For educational purposes only. All Trademarks are the property of their respective owners.
</footer>

</body>
</html>

